<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />

		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

		<title>Canvas test</title>
		<meta name="viewport" content="width=device-width initial-scale=1.0" />
		<script src="../zepto.min.js"></script>
		<link rel="stylesheet" type="text/css" href="../../css/base.css">

		<style type="text/css">
		ol li{
			margin:5px;
		}

		 #canvas1 {
	      height: 300px;
	      width: 400px;
	      border: 1px solid black;
	    }

	    .masked {
	/*      -webkit-transform: rotate(10deg);*/
	      -webkit-mask: -webkit-canvas(canvas1);
	    }
		</style>

		 <script type="text/javascript" charset="utf-8">
		    var gPageWidth = 320;
		    var gPageHeight = 200;
		    function drawPageShadow(shadowWidth)
		    {
		        var ctx = document.getCSSCanvasContext('2d', 'canvas1', gPageWidth, gPageHeight);
		        ctx.clearRect (0, 0, gPageWidth, gPageHeight);
		        var gradient = ctx.createLinearGradient(0, 0, shadowWidth, 0);
		        gradient.addColorStop(0, 'rgba(0,0,0,1)');
		        gradient.addColorStop(1, 'rgba(0,0,0,0)');
		        ctx.fillStyle = gradient;
		        ctx.fillRect (0, 0, shadowWidth, gPageHeight);    
		    }		    
		    function redrawCanvas(event)
		    {
		      drawPageShadow(event.pageX);
		    }		    
		    function onPageLoad()
		    {
		      drawPageShadow(640);
		    }
		    window.addEventListener('load', onPageLoad, false);		    
		  </script>

	</head>

	<body>
		<div id="desc" style="display:none">
	      <div id="pass-desc">
	        点击的位置不同，遮罩的位置也相应的不同
	      </div>
	      <div id="fail-desc">
	        与pass描述不同
	      </div>
	      <div id="step-desc">
	      	点击下方的图片或文字的不同位置
	      </div>
	    </div>
		<!-- <table class="desc-table" cellpadding="0" cellspacing="0">
			<tr>
				<td class="desc-header"><div class="title">Description</div><span class="fix">Descriptiondede</span></td>
				<td class="desc-body body-base">canvas-mask-redraw<br><a href="https://bugs.webkit.org/show_bug.cgi?id=19954">https://bugs.webkit.org/show_bug.cgi?id=19954</a></td>
			</tr>
			<tr>
				<td class="pass-header"><div class="title">Pass</div></td>
				<td class="pass-body body-base">点击的位置不同，遮罩的位置也相应的不同</td>
			</tr>
			<tr>
				<td class="fail-header"><div class="title">Fail</div></td>
				<td class="fail-body body-base">与pass描述不同</td>
			</tr>
			<tr>
				<td class="step-header"><div class="title">Step</div></td>
				<td class="step-body body-base">点击下方的图片或文字的不同位置</td>
			</tr>
		</table>
		</br> -->
		<div>
			<img src="../../resources/logo.gif"  width="320" height="200" alt="Clown Fish" class="masked" onclick="redrawCanvas(event)">

			<div class="masked" style="width: 320px" onclick="redrawCanvas(event)">
			     Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex 
			</div>

	</body>
</html>
