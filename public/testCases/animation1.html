<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />

		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

		<title>Animation Test</title>
		<!-- <meta name="viewport" content="width=device-width initial-scale=1.0" /> -->
		<script src="../kernelTest.js"></script>
		<script src="../zepto.min.js"></script>
		<link rel="stylesheet" type="text/css" href="../style.css">

		<style type="text/css">
		ol li{
			margin:5px;
		}
		</style>

		<!-- [1] -->
	    <style>
		#container {
		    width: 200px;
		    height: 200px;
		    background-image: -webkit-canvas(sourceCanvas);
		    background-size: 100%;
		    display: inline-block;
		}
		</style>

	</head>

	<body>
		<div>
			<!-- place your test case HTML content here -->
			<h1>Animation Test</h1>
			<hr>
			<div class='case'>
				<div class='describe'>
					<p style="background-color:skyblue; padding:3px;"><span>Decription:</span>  Animated-canvas-as-background【1】</p>
					<p style="background-color:palegreen; padding:3px;"><b>TEST PASS:</b> 
						This test passes if two green squares are displayed below.
					</p>
					<p style="background-color:#FF3300; padding:3px;"><b>TEST FAIL:</b>  
						The two red squares are displayed.
					</p>
				</div>
				<div>
			        <div style="display: inline-block">
			            <div id="container"></div>
			        </div>
			        <div id="canvas-container" style="display: inline-block"></div>
		    	</div>
			</div><!-- .case end -->


		<script>/* [1] */
	        var ctx = document.getCSSCanvasContext('2d', 'sourceCanvas', 200, 200);
	        var canvas = ctx.canvas;

	        function asyncDraw2() {
	            ctx.fillStyle = "green";
	            ctx.fillRect(0, 0, 300, 300);
	        }

	        function asyncDraw1() {
	            ctx.fillStyle = "red";
	            ctx.fillRect(0, 0, 300, 300);
	            window.webkitRequestAnimationFrame(asyncDraw2);
	        }

	        window.webkitRequestAnimationFrame(asyncDraw1);

	        document.querySelector('#canvas-container').appendChild(canvas);
    	</script>

	</body>
</html>
